{"version":3,"sources":["../src/datetime.js"],"names":[],"mappings":"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","file":"datetime.stg.js","sourcesContent":["/**\n * Created by Serge Balykov (ua9msn@mail.ru) on 2/1/17.\n */\n\n(function(window, document, undefined){\n\n    /* eslint-disable no-unused-vars */\n    const KEY_TAB       = 9,\n          KEY_ENTER     = 13,\n          KEY_BACKSPACE = 8,\n          KEY_DELETE    = 46,\n          KEY_ESCAPE    = 27,\n          KEY_SPACE     = 32,\n          KEY_DOWN      = 40,\n          KEY_UP        = 38,\n          KEY_LEFT      = 37,\n          KEY_RIGHT     = 39,\n          KEY_A         = 65,\n          KEY_C         = 67,\n          KEY_V         = 86,\n          KEY_D         = 68,\n          KEY_F2        = 113,\n          KEY_INSERT    = 45;\n    /* eslint-enable no-unused-vars */\n\n    const DAYLEN = 86400000;\n\n    const hashTypeFn = {\n        'weekday':   'Date',\n        'month':     'Month',\n        'day':       'Date',\n        'year':      'FullYear',\n        'hour':      'Hours',\n        'minute':    'Minutes',\n        'second':    'Seconds',\n        'dayperiod': 'Hours'\n    };\n\n    const FORMAT = {\n        hour12:  false,\n        hour:    '2-digit',\n        minute:  '2-digit',\n        second:  '2-digit',\n        weekday: 'long',\n        year:    'numeric',\n        month:   'long',\n        day:     'numeric',\n    };\n\n    const defaultProps = {\n        datetime: NaN,\n        locale:   navigator.language,\n        format:   FORMAT,\n        useUTC:   true,\n        minDate:  NaN,\n        maxDate:  NaN,\n        minTime:  NaN,\n        maxTime:  NaN,\n        onChange: t => {}\n    };\n\n    window.DateTimeEntry = Plugin;\n\n    function Plugin(element, props){\n        if (!(this instanceof Plugin)) return new Plugin(element, props);\n\n        const _props = Object.assign({}, defaultProps, props);\n\n        if (typeof element == \"string\") element = document.querySelector(element);\n        this.element  = element;\n\n        this.state = {\n            type:     undefined,\n            parts:    [],\n            datetime: _props.datetime || element.value,\n            step:     _props.step || parseInt(element.getAttribute('step'))\n        };\n\n        this._handleFocus = this._handleFocus.bind(this);\n        this._handleMouseDown = this._handleMouseDown.bind(this);\n        this._handleKeydown   = this._handleKeydown.bind(this);\n        this._handleMousewheel = this._handleMousewheel.bind(this);\n\n        this.element.setSelectionRange(0, 0);\n\n        // this.element.addEventListener('select', this.handleSelection.bind(this));\n        this.element.addEventListener('focus', this._handleFocus);\n        this.element.addEventListener('mouseup', this._handleMouseDown);\n        this.element.addEventListener('keydown', this._handleKeydown);\n        this.element.addEventListener('mousewheel', this._handleMousewheel);\n\n        this.setOptions(_props);\n    }\n\n    Plugin.prototype = {\n\n        setState: function(newPartialState, callback){\n\n            this.state = Object.assign({}, this.state, newPartialState);\n\n            this._render();\n\n            if(callback) {\n                callback.call(this);\n            }\n\n        },\n\n        setOptions: function(props){\n\n            this.props = Object.assign({}, this.props, props);\n\n            const format = Object.assign( {}, this.props.format, {\n                timeZone: this.props.useUTC ? 'Etc/UTC': undefined\n            });\n\n            this.dtFormatter = Intl.DateTimeFormat(this.props.locale, format);\n\n            let mD = new Date(this.props.minDate).getTime();\n            let MD = new Date(this.props.maxDate).getTime();\n            let mT = new Date(this.props.minTime).getTime();\n            let MT = new Date(this.props.maxTime).getTime();\n\n            this.props.minTime = ( mT % DAYLEN + DAYLEN ) % DAYLEN; // NaN, number [0...86400000 - 1]\n            this.props.maxTime = ( MT % DAYLEN + DAYLEN ) % DAYLEN;\n            this.props.minDate = isNaN(mT) ? mD : mD - mD % DAYLEN;  // NaN, number\n            this.props.maxDate = isNaN(MT) ? MD : MD - MD % DAYLEN;\n\n            if(!isNaN(this.props.minTime)) {\n                this.props.maxTime = isNaN(this.props.maxTime) ? DAYLEN : this.props.maxTime;\n            }\n\n            if(!isNaN(this.props.maxTime)) {\n                this.props.minTime = isNaN(this.props.minTime) ? 0 : this.props.minTime;\n            }\n\n            const state = this._setDateTime( !isNaN(props.datetime) ? props.datetime : this.state.datetime );\n\n            this.setState(state);\n\n\n            this._render();\n\n        },\n\n        getTime: function(){\n            return this.state.datetime;\n        },\n\n        setTime: function(date){\n            const newState = this._setDateTime(date);\n            this.setState(newState);\n        },\n\n        destroy(){\n\n            this.element.removeEventListener('focus', this._handleFocus);\n            this.element.removeEventListener('mouseup', this._handleMouseDown);\n            this.element.removeEventListener('keydown', this._handleKeydown);\n            this.element.removeEventListener('mousewheel', this._handleMousewheel);\n        },\n\n        _render: function(){\n\n            let string;\n\n            try {\n                string = this.dtFormatter.format(this.state.datetime);\n            } catch(E) {\n                string = '';\n            }\n\n            this.element.value = string;\n\n            this.element.setSelectionRange(0, 0);\n\n            if(document.activeElement !== this.element) return; //avoid selection on element without focus (Firefox)\n\n            const type = this.state.type || '';\n\n            const partIndex = this.state.parts.findIndex(p => type ? p.type === type : p.type !== 'literal');\n\n            if(!~partIndex) return;\n\n            const ss = this.state.parts\n                .slice(0, partIndex)\n                .reduce((p, c) => p + c.value.length, 0);\n\n            const se = ss + this.state.parts[partIndex].value.length;\n\n            this.element.setSelectionRange(ss, se);\n        },\n\n        _setDateTime(datetime){\n\n            let parts, type, step = this.state.step;\n\n            if (typeof datetime == \"string\" && /^\\d{1,2}\\:\\d{1,2}/.test(datetime)) {\n                datetime = \"0 \" + datetime;\n            }\n\n            datetime = new Date(datetime);\n\n            if (!isNaN(step)) {\n                step = step * 1000;\n                datetime = new Date(Math.floor(datetime.getTime() / step) * step);\n            }\n\n            datetime = this._fitToLimits(datetime);\n\n            try {\n                parts = this.dtFormatter.formatToParts(datetime);\n                type  = this.state.type || parts.find(p => p.type !== 'literal').type;\n            } catch(E) {\n                parts = [];\n                type  = undefined;\n            }\n\n            return({datetime, parts, type, step: this.state.step});\n\n            // this.setState({\n            //     type,\n            //     datetime,\n            //     parts,\n            // }, () => {\n            //     this.props.onChange(datetime);\n            // });\n\n        },\n\n        _handleFocus(e){\n            this._render();\n        },\n\n        _handleMouseDown(e){\n\n            e.preventDefault();\n\n            if(isNaN(this.state.datetime)){\n\n                const dt = new Date();\n\n                if(this.props.useUTC){\n                    dt.setUTCHours( dt.getHours(), dt.getMinutes(), dt.getSeconds());\n                }\n\n                this.setTime( dt );\n                return;\n            }\n\n            const parts = this.state.parts;\n            let ss      = 0,\n                  se    = 0,\n                  cp    = e.target.selectionStart;\n\n            const selection = parts.reduce((p, c) =>{\n                ss = se;\n                se = ss + c.value.length;\n\n                if(c.type !== 'literal' && cp >= ss && cp <= se) {\n                    p.type = c.type;\n                    p.ss   = ss;\n                    p.se   = se;\n                }\n\n                return p;\n\n            }, {type: '', ss: 0, se: 0});\n\n            this.state.type = selection.type;\n            // this.state.ss = selection.ss ;\n            // this.state.se = selection.se ;\n\n            this._render();\n\n        },\n\n        _handleKeydown(e){\n\n            switch(e.which) {\n\n                case KEY_LEFT: {\n                    e.preventDefault();\n                    const type = this._getNextTypeInDirection(-1);\n                    if (type) this.setState({type});\n                    break;\n                }\n\n                case KEY_RIGHT: {\n                    e.preventDefault();\n                    const type = this._getNextTypeInDirection(1);\n                    if (type) this.setState({type});\n                    break;\n                }\n\n                case KEY_UP: {\n                    e.preventDefault();\n                    const newDatetime = this._crement(1, this.state);\n                    const newState    = this._setDateTime(newDatetime);\n                    this.setState(newState, this._notify);\n                    break;\n                }\n                case KEY_DOWN: {\n                    e.preventDefault();\n                    const newDatetime = this._crement(-1, this.state);\n                    const newState    = this._setDateTime(newDatetime);\n                    this.setState(newState, this._notify);\n                    break;\n                }\n\n                case KEY_DELETE: {\n                    e.preventDefault();\n                    const newState = this._setDateTime(new Date(NaN));\n                    this.setState(newState, this._notify);\n\n                    break;\n                }\n\n                case KEY_TAB:\n                    const type = this._getNextTypeInDirection(e.shiftKey ? -1 : 1);\n                    if (type) {\n                        e.preventDefault();\n                        this.setState({type});\n                    }\n                    break;\n\n                case KEY_A:\n                case KEY_C: {\n                    if(!e.ctrlKey) {\n                        e.preventDefault();\n                    }\n                    break;\n\n                }\n\n                default: {\n                    // https://github.com/ua9msn/datetime/issues/2\n                    e.preventDefault();\n                    // ignore non-numbers\n                    if(!isFinite(e.key)) return;\n                    // ignore if nothing\n                    if(!this.state.type) {\n\n                    }\n                    // ignore ampm\n                    if(this.state.type === 'dayperiod') return;\n                    // ignore Weekday\n                    if(this.state.type === 'weekday') return;\n\n                    this._modify(+e.key, this.state.type);\n\n                    break;\n\n                }\n            }\n\n        },\n\n        _handleMousewheel: function(e){\n            e.preventDefault();\n            e.stopPropagation();\n\n            const direction = Math.sign(e.wheelDelta);\n\n            const newDatetime = this._crement(direction, this.state.type);\n            const newState    = this._setDateTime(newDatetime);\n            this.setState(newState, this._notify);\n\n\n            this._render();\n\n        },\n\n        _getNextTypeInDirection(direction){\n            direction = Math.sign(direction);\n\n            if(!this.state.parts || !this.state.parts.length) return;\n\n            let curIndex = this.state.parts.findIndex(p => p.type === this.state.type);\n\n            if(!~curIndex) {\n                curIndex = this.state.parts.findIndex(p => p.type !== 'literal');\n            }\n\n            let ono = false, index = curIndex;\n\n            while(!ono && this.state.parts[index + direction]) {\n                index += direction;\n                ono = this.state.parts[index] && this.state.parts[index].type !== 'literal';\n            }\n\n            return (ono ? this.state.parts[index] : {}).type;\n        },\n\n        _crement(operator, state){\n\n            const type = state.type;\n            const part = this.state.parts.find(p => p.type === type);\n\n            const dt = ( !isNaN(this.state.datetime) && this.state.datetime ) || this.props.preset || Date.now();\n\n            let proxyTime = new Date(dt);\n            const stamp = proxyTime.getTime();\n\n            if(!part || type === 'literal') return proxyTime;\n\n            let fnName   = (this.props.useUTC ? 'UTC' : '' ) + hashTypeFn[type],\n                newValue = proxyTime['get' + fnName]();\n\n            if(part.type === 'dayperiod') {\n                newValue += operator * 12;\n            } else if(part.type === 'weekday') {\n                newValue += operator;\n            } else {\n                newValue += operator;\n            }\n\n            proxyTime['set' + fnName](newValue);\n            let newstamp = proxyTime.getTime();\n            const step = state.step;\n            if (!isNaN(step) && Math.abs(newstamp - stamp) < step * 1000) {\n                newstamp = stamp + operator * step * 1000;\n                proxyTime = new Date(newstamp);\n            }\n\n            return this._fitToLimits(proxyTime);\n\n        },\n\n        _modify(input, type){\n\n            const maxValue = this._getMaxFieldValueAtDate(this.state.datetime, type);\n\n            const newDatetime = this._calculateNextValue(input, type, maxValue);\n\n            const newState = this._setDateTime(newDatetime);\n\n            this.setState(newState, this._notify);\n\n            // if(result !== this.state.datetime) {\n            //\n            //     this.setState({\n            //         datetime: result,\n            //         spares : this._disassembleTimestamp(result, this.state.locale, this.state.format)\n            //     }, this._notify)\n            //\n            // }\n        },\n\n        _getMaxFieldValueAtDate(date, fieldName){\n\n            const fy = this.props.useUTC ? date.getUTCFullYear(): date.getFullYear();\n            const m  = this.props.useUTC ? date.getUTCMonth()   : date.getMonth();\n\n            switch(fieldName) {\n                case 'year':\n                    return 9999;\n                case 'month':\n                    return 12;\n                case 'day':\n                    return (new Date(fy, m + 1, 0)).getDate(); // get number of days in the month\n                case 'hour':\n                    return 23;\n                case 'minute':\n                    return 59;\n                case 'second':\n                    return 59;\n                default:\n                    break;\n\n            }\n\n        },\n\n        _calculateNextValue(input, type, max){\n\n            const getFN = 'get' + (this.props.useUTC ? 'UTC' : '' ) + hashTypeFn[type];\n            const setFN = 'set' + (this.props.useUTC ? 'UTC' : '' ) + hashTypeFn[type];\n\n            let prev = this.state.datetime[getFN]();\n\n            // in spare month has value as for Date (Jan = 0)\n            // but user input supposed to be 1 for Jan\n            if(type === 'month') {\n                prev = prev + 1;\n            }\n\n            //append number to the end\n            const x = prev * 10 + input;\n\n            // split to summ of digits\n            const arr = [x % 10000, x % 1000, x % 100, x % 10];\n\n            // calculate closest less value\n            let mm = arr.reduce(function(p, c){\n                return c <= max ? Math.max(p, c) : p;\n            }, 0);\n\n            // rollback month value\n            // but prevent pass 0\n            if(type === 'month') {\n                mm = mm ? mm - 1 : prev - 1;\n            }\n\n            // Date can not be null.\n            // We allow to enter 0 if it makes valid date (10, 20, 30)\n            if(type === 'day' && mm === 0) {\n                mm = prev;\n            }\n\n            let proxyTime = new Date(this.state.datetime);\n\n            proxyTime[setFN](mm);\n\n            const isValid = this._validate(proxyTime);\n\n            if(isValid) {\n                return proxyTime;\n            } else {\n\n                let isFieldValid        = true;\n                const maxDateFieldValue = ( new Date(this.props.maxDate) )[getFN]();\n                const minDateFieldValue = ( new Date(this.props.minDate) )[getFN]();\n                const minTimeFieldValue = ( new Date(this.props.minTime) )[getFN]();  //NaN, number\n                const maxTimeFieldValue = ( new Date(this.props.maxTime) )[getFN]();\n                const thisValue         = proxyTime[getFN]();\n\n                if(type === 'year' || type === 'month' || type === 'day') {\n                    isFieldValid = !(maxDateFieldValue < thisValue) && !(thisValue < minDateFieldValue);\n                }\n\n                if(type === 'hour' || type === 'minute' || type === 'second') {\n\n                    if(maxTimeFieldValue > minTimeFieldValue) {\n                        isFieldValid = !( (maxDateFieldValue || maxTimeFieldValue) < thisValue) && !(thisValue < ( minTimeFieldValue || minDateFieldValue) );\n                    } else {\n                        isFieldValid = !( (maxDateFieldValue || maxTimeFieldValue) > thisValue) && !(thisValue > ( minTimeFieldValue || minDateFieldValue) );\n                    }\n                }\n\n                if(isFieldValid) {\n                    proxyTime = this._fitToLimits(proxyTime);\n                    return proxyTime;\n                }\n\n                // spare.buffer = (spare.buffer || 0) * 10 + input;\n\n                return this.state.datetime;\n\n            }\n\n        },\n\n        _validate(datetime){\n\n            const timestamp = datetime.getTime();\n            const timePart  = (timestamp % DAYLEN + DAYLEN) % DAYLEN;\n            const datePart  = timestamp - timePart;\n\n            let validTime = true,\n                validDate = true;\n\n            const isMaxDate    = isFinite(this.props.maxDate);\n            const isMaxTime    = isFinite(this.props.maxTime);\n            const isMinDate    = isFinite(this.props.minDate);\n            const isMinTime    = isFinite(this.props.minTime);\n            const isNightRange = this.state.minTime > this.state.maxTime;\n\n            if(isMinTime && isMaxTime) {\n                validTime = isNightRange\n                    ? this.props.maxTime >= timePart || timePart >= this.props.minTime\n                    : this.props.maxTime >= timePart && timePart >= this.props.minTime;\n            }\n\n            if(isMinDate && !isMinTime) {\n                validDate = validDate && (timestamp >= this.props.minDate);\n            }\n\n            if(isMaxDate && !isMaxTime) {\n                validDate = validDate && (timestamp <= this.props.maxDate);\n            }\n\n            if(isMinDate && isMinTime) {\n                validDate = validDate && (datePart >= this.props.minDate);\n            }\n\n            if(isMaxDate && isMaxTime) {\n                validDate = validDate && (datePart <= this.props.maxDate);\n            }\n\n            return validDate && validTime;\n\n        },\n\n        _fitToLimits(datetime){\n\n            if(isNaN(datetime)) return datetime;\n\n            const timestamp = datetime.getTime();\n\n            let timePart = (timestamp % DAYLEN + DAYLEN) % DAYLEN; //this is trick for negative timestamps\n            let datePart = timestamp - timePart;\n\n            if(!isNaN(this.props.minTime) && !isNaN(this.props.maxTime)) {\n\n                if(this.props.maxTime > this.props.minTime) {\n                    timePart = Math.max(this.props.minTime, Math.min(this.props.maxTime, timePart));\n                } else {\n                    let nearestLimit = Math.abs(timePart - this.props.maxTime) < Math.abs(timePart - this.props.minTime)\n                        ? this.props.maxTime\n                        : this.props.minTime;\n                    timePart         = timePart > this.props.minTime || timePart < this.props.maxTime ? timePart : nearestLimit;\n                }\n\n                if(!isNaN(this.props.minDate)) {\n                    datePart = Math.max(datePart, this.props.minDate);\n                }\n\n                if(!isNaN(this.props.maxDate)) {\n                    datePart = Math.min(datePart, this.props.maxDate);\n                }\n\n            } else {\n\n                timePart = 0;\n\n                let mD = isNaN(this.props.minDate) ? -Infinity : this.props.minDate;\n                let MD = isNaN(this.props.maxDate) ? Infinity : this.props.maxDate;\n\n                datePart = Math.max(mD, Math.min(MD, timestamp));\n\n                if(isNaN(datePart)) {\n                    datePart = timestamp;\n                }\n            }\n\n            return new Date(datePart + timePart);\n\n        },\n\n        _notify(){\n            this.props.onChange(this.state.datetime);\n            var e;\n            if (document.createEvent) {\n              e = document.createEvent('HTMLEvents');\n              e.initEvent('change', true, true);\n            } else {\n              e = new Event('change', { bubbles: true, cancelable: true });\n            }\n            this.element.dispatchEvent(e);\n        }\n\n\n    };\n\n})(window, document);\n"]}